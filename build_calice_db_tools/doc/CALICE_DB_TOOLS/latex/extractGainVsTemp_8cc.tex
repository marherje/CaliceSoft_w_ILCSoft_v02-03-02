\section{/nfs/dust/ilc/user/marquezh/\-Calice\-Soft\-\_\-w\-\_\-\-I\-L\-C\-Soft\-\_\-v02-\/03-\/02/calice\-\_\-db\-\_\-tools/src/extract\-Gain\-Vs\-Temp.cc File Reference}
\label{extractGainVsTemp_8cc}\index{/nfs/dust/ilc/user/marquezh/\-Calice\-Soft\-\_\-w\-\_\-\-I\-L\-C\-Soft\-\_\-v02-\/03-\/02/calice\-\_\-db\-\_\-tools/src/extract\-Gain\-Vs\-Temp.\-cc@{/nfs/dust/ilc/user/marquezh/\-Calice\-Soft\-\_\-w\-\_\-\-I\-L\-C\-Soft\-\_\-v02-\/03-\/02/calice\-\_\-db\-\_\-tools/src/extract\-Gain\-Vs\-Temp.\-cc}}
{\ttfamily \#include \char`\"{}T\-R\-O\-O\-T.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}T\-Graph\-Errors.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}T\-Axis.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}T\-File.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}T\-H1\-D.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}lcio.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}E\-V\-E\-N\-T/\-L\-C\-Collection.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}I\-M\-P\-L/\-L\-C\-Collection\-Vec.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}I\-M\-P\-L/\-L\-C\-Event\-Impl.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}I\-M\-P\-L/\-L\-C\-Parameters\-Impl.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}I\-M\-P\-L/\-L\-C\-Run\-Header\-Impl.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}U\-T\-I\-L/\-L\-C\-Time.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}U\-T\-I\-L/\-L\-C\-T\-O\-O\-L\-S.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Run\-Time\-Info.\-hh\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Ahc\-Slow\-Readout\-Mod\-Block.\-hh\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Ahc\-Slow\-Readout\-Mod\-Mapper.\-hh\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Ahc\-Simple\-Temp\-Provider.\-hh\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Hcal\-Tile\-Index.\-hh\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Simple\-Value.\-hh\char`\"{}}\\*
{\ttfamily \#include \char`\"{}lccd.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}lccd/\-D\-B\-Interface.\-hh\char`\"{}}\\*
{\ttfamily \#include \char`\"{}lccd/\-D\-B\-Cond\-Handler.\-hh\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Conditions\-D\-B/\-I\-Cond\-D\-B\-Mgr.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Conditions\-D\-B/\-I\-Cond\-D\-B\-Data\-Access.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Conditions\-D\-B/\-I\-Cond\-D\-B\-Data\-Iterator.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Conditions\-D\-B/\-Cond\-D\-B\-Obj\-Factory.\-h\char`\"{}}\\*
{\ttfamily \#include $<$algorithm$>$}\\*
{\ttfamily \#include $<$functional$>$}\\*
{\ttfamily \#include $<$sstream$>$}\\*
{\ttfamily \#include $<$string$>$}\\*
{\ttfamily \#include $<$map$>$}\\*
{\ttfamily \#include $<$utility$>$}\\*
{\ttfamily \#include \char`\"{}Veto\-Threshold.\-hh\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Veto\-Fraction.\-hh\char`\"{}}\\*
{\ttfamily \#include \char`\"{}D\-B\-Interface\-Mgr.\-hh\char`\"{}}\\*
{\ttfamily \#include $<$fstream$>$}\\*
{\ttfamily \#include \char`\"{}Calice\-D\-B\-Init\-Helper.\-hh\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Calice\-D\-B\-Helper.\-hh\char`\"{}}\\*
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct {\bf cell\-Data\-\_\-t}
\item 
struct {\bf voltage\-Data\-\_\-t}
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef std\-::map$<$ unsigned int, \\*
{\bf voltage\-Data\-\_\-t} $>$ {\bfseries voltage\-\_\-t}\label{extractGainVsTemp_8cc_ad7fd3ccb1c9df8fe38900ac1302addfb}

\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void {\bfseries fill\-Values} (std\-::map$<$ unsigned int, {\bf cell\-Data\-\_\-t} $>$ \&data, lcio\-::\-L\-C\-Collection $\ast$gain\-Collection, std\-::vector$<$ C\-A\-L\-I\-C\-E\-::\-Ahc\-Temp\-Provider $\ast$ $>$ temp\-Providers)\label{extractGainVsTemp_8cc_a1ac5935dd79bf264db3a460c79b3b05a}

\item 
void {\bfseries collect\-Gain\-Values} (std\-::map$<$ unsigned int, {\bf cell\-Data\-\_\-t} $>$ \&data, const lccd\-::\-L\-C\-C\-D\-Time\-Stamp from, const lccd\-::\-L\-C\-C\-D\-Time\-Stamp till, const std\-::string gain\-Folder, const std\-::string temp\-Calib\-Folder, std\-::map$<$ int, bool $>$ \&excluded\-Runs, {\bf Calice\-D\-B\-Helper} \&db\-Helper, const C\-A\-L\-I\-C\-E\-::\-Ahc\-Mapper $\ast$ahc\-Mapper, std\-::string temp\-Provider\-Model)\label{extractGainVsTemp_8cc_a43922251ebb7273c8d4d86d26f402805}

\item 
double {\bfseries get\-Mean} (const std\-::vector$<$ double $>$ values, double \&min, double \&max)\label{extractGainVsTemp_8cc_afaa7d8373bf0feb2a1f23ac6ad09506b}

\item 
T\-H1\-D $\ast$ {\bfseries get\-Histogram} (const std\-::vector$<$ double $>$ values, const unsigned int module, const std\-::string label)\label{extractGainVsTemp_8cc_aeee70b8a9261aacc2e9bcd99b411eed6}

\item 
int {\bfseries main} (int argc, char $\ast$$\ast$argv)\label{extractGainVsTemp_8cc_a3c04138a5bfe5d72780bb7e82a18e627}

\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
std\-::string {\bfseries db\-Init} = {\bf calice\-::get\-D\-B\-Init\-String}()\label{extractGainVsTemp_8cc_a6b6249ff0366b8a48c34dfbbf6c6fbec}

\item 
std\-::string {\bfseries time\-Folder\-Name} = \char`\"{}/cd\-\_\-calice/C\-A\-L\-D\-A\-Q\-\_\-\-Run\-Time\-Info\char`\"{}\label{extractGainVsTemp_8cc_a4d2cd635f803f7649a78988cdd8b70b9}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
This tool collects results from individual calibration measurements + temperatures for each channel from the specified range of runs and creates T\-Graph\-Errors from these values. Histograms of the operation voltages are included for xchecks.

Usage\-:


\begin{DoxyCode}
extractGainVsTemp <dbfolder> <tempCalib> <first> <last> <outfile> [<exclude>]
\end{DoxyCode}



\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em $<$dbfolder$>$} & D\-B folder containing results from the single gain measurements (e.\-g. \char`\"{}/cd\-\_\-calice/\-Hcal/\-Calib\-\_\-\-Measurements/gain\-\_\-single\char`\"{}) \\
\hline
\mbox{\tt in}  & {\em $<$temp\-Calib$>$} & D\-B folder containing calibration for temperature sensors (e.\-g. \char`\"{}/cd\-\_\-calice/\-Hcal/temp\-Sensors\char`\"{}) \\
\hline
\mbox{\tt in}  & {\em $<$first$>$} & first run of run range \\
\hline
\mbox{\tt in}  & {\em $<$last$>$} & last run of run range \\
\hline
\mbox{\tt out}  & {\em $<$outfile$>$} & name of the output file ($\ast$.root) \\
\hline
\mbox{\tt in}  & {\em $<$exclude$>$} & (optional) .txt file with list of runs that are excluded from run range \\
\hline
\end{DoxyParams}


Definition in file {\bf extract\-Gain\-Vs\-Temp.\-cc}.

