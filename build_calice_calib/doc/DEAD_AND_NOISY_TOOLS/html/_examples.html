<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>DeadAndNoisyTools: $title</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">DeadAndNoisyTools
   &#160;<span id="projectnumber">1.1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="contents">
<div class="textblock"><p>These are some examples for the interactive use at ROOT's CINT prompt.</p>
<p>All examples assume that you have the libDeadAndNoisyTools library loaded. </p>
<div class="fragment"><div class="line">~&gt; export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:${PATH_TO_CALICE_CALIB}/lib</div>
<div class="line">~&gt; root -l</div>
<div class="line">root [0] gSystem-&gt;Load(<span class="stringliteral">&quot;libDeadAndNoisyTools.so&quot;</span>)</div>
</div><!-- fragment --><p>Note: The <code>export</code> command is for bash, you might have to adapt it if you are using a different shell.</p>
<p>If you need it regularly you might want to put the <code>gSystem-&gt;Load()</code> command into your rootlogon.C</p>
<h1><a class="anchor" id="usingSpectrumPropertiesRunInfo"></a>
Having a closer look at one run using SpectrumPropertiesRunInfo</h1>
<p>The input for the <a class="el" href="class_spectrum_properties_run_info.html" title="The SpectrumPropertiesRunInfo is a utility class to access the spectrum properties for all channels o...">SpectrumPropertiesRunInfo</a> class is a root file with the spectra for each channel. Usually this is in a files called <code>runnumber.root</code>. Currently also a file with the AHC config is needed for the frontend/slot &lt;-&gt; module mapping. This is subject to be removed once the mapping in ahcBinHst ist fully working.</p>
<h2><a class="anchor" id="plotRun"></a>
Plotting the rms of all channels in a run</h2>
<p>For this we use the TTree:.Draw() command from root. The <a class="el" href="class_spectrum_properties_run_info.html" title="The SpectrumPropertiesRunInfo is a utility class to access the spectrum properties for all channels o...">SpectrumPropertiesRunInfo</a> class provides the tree for you. All you need is the input file <code>RUNNUMBER.root</code>. You simply create the <a class="el" href="class_spectrum_properties_run_info.html" title="The SpectrumPropertiesRunInfo is a utility class to access the spectrum properties for all channels o...">SpectrumPropertiesRunInfo</a> object [1] and get the tree from it [2]. For drawing TGraphs (2D plots) it is convenient to change the marker style from a one pixel dot to something larger [3]. </p>
<div class="fragment"><div class="line">root [1] <a class="code" href="class_spectrum_properties_run_info.html">SpectrumPropertiesRunInfo</a> spri(360759,<span class="stringliteral">&quot;AHCforCERN2010.cfg&quot;</span>);</div>
<div class="line">root [2] TTree *t = spri.getSpectrumPropertiesTree()</div>
<div class="line">root [3] t-&gt;SetMarkerStyle(2);</div>
</div><!-- fragment --><p>Now you can draw any information in the Tree with just one line, incl. cuts. </p>
<ul>
<li>[4] Histogram the mean values for all channels </li>
<li>[5] Draw a graph rmv vs. channel for all channels in module 9 <div class="fragment"><div class="line">root [4] t-&gt;Draw(<span class="stringliteral">&quot;_mean&quot;</span>,<span class="stringliteral">&quot;_slot==19&quot;</span>)</div>
<div class="line">root [5] t-&gt;Draw(<span class="stringliteral">&quot;_rms:_channel+_chip*spri.getNChannelsPerChip()&quot;</span>,<span class="stringliteral">&quot;_module==9&quot;</span>) </div>
</div><!-- fragment --> Note the usage of <a class="el" href="class_spectrum_properties_run_info.html#a3d9d8e0ae2cef40794561409120e257c" title="Get the number of channels per chip. ">SpectrumPropertiesRunInfo::getNChannelsPerChip()</a>. There is also the SpectrumPropertiesRunInfo::getNChipsPerModue() function. You can use this to calculate the global channel number <img class="formulaInl" alt="$( moduleID \cdot nChipsPerModule + chipID ) \cdot nChannelsPerChip + channelNumber $" src="form_0.png"/>.</li>
</ul>
<h2><a class="anchor" id="plotDead"></a>
Plotting the rms of only the dead channels</h2>
<h2><a class="anchor" id="printDead"></a>
Printing a list of dead channels in one run</h2>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
