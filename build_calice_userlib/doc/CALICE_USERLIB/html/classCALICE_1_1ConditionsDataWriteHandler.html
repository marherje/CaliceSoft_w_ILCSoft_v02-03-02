<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>CALICE_USERLIB: CALICE::ConditionsDataWriteHandler Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CALICE_USERLIB
   &#160;<span id="projectnumber">6.7.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceCALICE.html">CALICE</a></li><li class="navelem"><a class="el" href="classCALICE_1_1ConditionsDataWriteHandler.html">ConditionsDataWriteHandler</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">CALICE::ConditionsDataWriteHandler Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Handler of conditions data changes which writes the replaced collections to a conditions data base.  
 <a href="classCALICE_1_1ConditionsDataWriteHandler.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="ConditionsDataWriteHandler_8hh_source.html">ConditionsDataWriteHandler.hh</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for CALICE::ConditionsDataWriteHandler:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classCALICE_1_1ConditionsDataWriteHandler.png" usemap="#CALICE::ConditionsDataWriteHandler_map" alt=""/>
  <map id="CALICE::ConditionsDataWriteHandler_map" name="CALICE::ConditionsDataWriteHandler_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae0e0b43ca010d9a424f962480175b110"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1ConditionsDataWriteHandler.html#ae0e0b43ca010d9a424f962480175b110">ConditionsDataWriteHandler</a> (const std::string &amp;col_name, const std::string &amp;db_init_string, const std::string &amp;folder_name, const std::string &amp;tag, const std::string &amp;description)</td></tr>
<tr class="memdesc:ae0e0b43ca010d9a424f962480175b110"><td class="mdescLeft">&#160;</td><td class="mdescRight">constructor.  <a href="#ae0e0b43ca010d9a424f962480175b110">More...</a><br/></td></tr>
<tr class="separator:ae0e0b43ca010d9a424f962480175b110"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a581dea40c8faa28948c8cb461d9126dc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a581dea40c8faa28948c8cb461d9126dc"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1ConditionsDataWriteHandler.html#a581dea40c8faa28948c8cb461d9126dc">~ConditionsDataWriteHandler</a> ()</td></tr>
<tr class="memdesc:a581dea40c8faa28948c8cb461d9126dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">destructor. <br/></td></tr>
<tr class="separator:a581dea40c8faa28948c8cb461d9126dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0289e54f162d87125bce02b71dc46b51"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1ConditionsDataWriteHandler.html#a0289e54f162d87125bce02b71dc46b51">conditionsChanged</a> (lcio::LCCollection *col)</td></tr>
<tr class="memdesc:a0289e54f162d87125bce02b71dc46b51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Be notified if conditions data changes and redirect changes to responsible class.  <a href="#a0289e54f162d87125bce02b71dc46b51">More...</a><br/></td></tr>
<tr class="separator:a0289e54f162d87125bce02b71dc46b51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a139623a650f56c24a5d32658da9af09b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1ConditionsDataWriteHandler.html#a139623a650f56c24a5d32658da9af09b">writeConditionsData</a> (const long64 &amp;best_guess_of_till_time_stamp)</td></tr>
<tr class="memdesc:a139623a650f56c24a5d32658da9af09b"><td class="mdescLeft">&#160;</td><td class="mdescRight">write the conditions data to the conditions database.  <a href="#a139623a650f56c24a5d32658da9af09b">More...</a><br/></td></tr>
<tr class="separator:a139623a650f56c24a5d32658da9af09b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaac4f4263bbfb7a38cfbf0cb6c6ef99b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1ConditionsDataWriteHandler.html#aaac4f4263bbfb7a38cfbf0cb6c6ef99b">setSinceTime</a> (long64 since_time)</td></tr>
<tr class="memdesc:aaac4f4263bbfb7a38cfbf0cb6c6ef99b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the correct since time for the current conditions data.  <a href="#aaac4f4263bbfb7a38cfbf0cb6c6ef99b">More...</a><br/></td></tr>
<tr class="separator:aaac4f4263bbfb7a38cfbf0cb6c6ef99b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a578e53e8c53ee791d1ab574811551496"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a578e53e8c53ee791d1ab574811551496"></a>
const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>name</b> () const </td></tr>
<tr class="separator:a578e53e8c53ee791d1ab574811551496"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a535ca783c3475b0cbacd99484c4e4229"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a535ca783c3475b0cbacd99484c4e4229"></a>
unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1ConditionsDataWriteHandler.html#a535ca783c3475b0cbacd99484c4e4229">numberOfWrites</a> () const </td></tr>
<tr class="memdesc:a535ca783c3475b0cbacd99484c4e4229"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of collections written to the database;. <br/></td></tr>
<tr class="separator:a535ca783c3475b0cbacd99484c4e4229"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae53d14eec368dc28b8bc5dcb73ed2d01"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae53d14eec368dc28b8bc5dcb73ed2d01"></a>
unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1ConditionsDataWriteHandler.html#ae53d14eec368dc28b8bc5dcb73ed2d01">changes</a> () const </td></tr>
<tr class="memdesc:ae53d14eec368dc28b8bc5dcb73ed2d01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of recognised changes of the conditions data. <br/></td></tr>
<tr class="separator:ae53d14eec368dc28b8bc5dcb73ed2d01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1899ab4669280acec16c6baa53e6abc3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1899ab4669280acec16c6baa53e6abc3"></a>
long64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1ConditionsDataWriteHandler.html#a1899ab4669280acec16c6baa53e6abc3">validAtMostSince</a> () const </td></tr>
<tr class="memdesc:a1899ab4669280acec16c6baa53e6abc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the time of the first recognised conditions data change. <br/></td></tr>
<tr class="separator:a1899ab4669280acec16c6baa53e6abc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a487fe71c6d796b46dac6dd7ea16eb917"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a487fe71c6d796b46dac6dd7ea16eb917"></a>
long64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1ConditionsDataWriteHandler.html#a487fe71c6d796b46dac6dd7ea16eb917">validAtMostTill</a> () const </td></tr>
<tr class="memdesc:a487fe71c6d796b46dac6dd7ea16eb917"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the time of the last write to the data base. <br/></td></tr>
<tr class="separator:a487fe71c6d796b46dac6dd7ea16eb917"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3a420cb581ed9519e06e795dd13ac9a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac3a420cb581ed9519e06e795dd13ac9a"></a>
long64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1ConditionsDataWriteHandler.html#ac3a420cb581ed9519e06e795dd13ac9a">currentValidSince</a> () const </td></tr>
<tr class="memdesc:ac3a420cb581ed9519e06e795dd13ac9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the time of the first recognised conditions data change. <br/></td></tr>
<tr class="separator:ac3a420cb581ed9519e06e795dd13ac9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cae6dc5fd78a5aa243bb589ba4c7caa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7cae6dc5fd78a5aa243bb589ba4c7caa"></a>
long64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1ConditionsDataWriteHandler.html#a7cae6dc5fd78a5aa243bb589ba4c7caa">currentValidTill</a> () const </td></tr>
<tr class="memdesc:a7cae6dc5fd78a5aa243bb589ba4c7caa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the time of the last write to the data base. <br/></td></tr>
<tr class="separator:a7cae6dc5fd78a5aa243bb589ba4c7caa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e14961a4bf03b6282f2b59fe87790fa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3e14961a4bf03b6282f2b59fe87790fa"></a>
const std::string &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>getTag</b> () const </td></tr>
<tr class="separator:a3e14961a4bf03b6282f2b59fe87790fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a7e065bb6ab09b579ce20f7dbbbdf07a2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7e065bb6ab09b579ce20f7dbbbdf07a2"></a>
const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1ConditionsDataWriteHandler.html#a7e065bb6ab09b579ce20f7dbbbdf07a2">_colName</a></td></tr>
<tr class="memdesc:a7e065bb6ab09b579ce20f7dbbbdf07a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">name of the collection (not used) <br/></td></tr>
<tr class="separator:a7e065bb6ab09b579ce20f7dbbbdf07a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94ae745611b1bff4441eab7677c408c1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a94ae745611b1bff4441eab7677c408c1"></a>
lccd::DBInterface&#160;</td><td class="memItemRight" valign="bottom"><b>_db</b></td></tr>
<tr class="separator:a94ae745611b1bff4441eab7677c408c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a20bce4a053386c2d4f786653438f38"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3a20bce4a053386c2d4f786653438f38"></a>
lccd::IConditionsHandler *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1ConditionsDataWriteHandler.html#a3a20bce4a053386c2d4f786653438f38">_changeHandler</a></td></tr>
<tr class="memdesc:a3a20bce4a053386c2d4f786653438f38"><td class="mdescLeft">&#160;</td><td class="mdescRight">handler of the conditions data <br/></td></tr>
<tr class="separator:a3a20bce4a053386c2d4f786653438f38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62de4dca742011f4fdb976d4bb3abee2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a62de4dca742011f4fdb976d4bb3abee2"></a>
const std::string&#160;</td><td class="memItemRight" valign="bottom"><b>_tag</b></td></tr>
<tr class="separator:a62de4dca742011f4fdb976d4bb3abee2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01342556e5b2c4916dbb3d3705dd0af3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a01342556e5b2c4916dbb3d3705dd0af3"></a>
const std::string&#160;</td><td class="memItemRight" valign="bottom"><b>_description</b></td></tr>
<tr class="separator:a01342556e5b2c4916dbb3d3705dd0af3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9c2172504130f906f18d6459823d62b"><td class="memItemLeft" align="right" valign="top">long64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1ConditionsDataWriteHandler.html#ae9c2172504130f906f18d6459823d62b">_since</a></td></tr>
<tr class="memdesc:ae9c2172504130f906f18d6459823d62b"><td class="mdescLeft">&#160;</td><td class="mdescRight">the time of the event just before the conditions data changed.  <a href="#ae9c2172504130f906f18d6459823d62b">More...</a><br/></td></tr>
<tr class="separator:ae9c2172504130f906f18d6459823d62b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3867ef683d994f3ab4a00b2ef7ae410c"><td class="memItemLeft" align="right" valign="top">long64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1ConditionsDataWriteHandler.html#a3867ef683d994f3ab4a00b2ef7ae410c">_till</a></td></tr>
<tr class="memdesc:a3867ef683d994f3ab4a00b2ef7ae410c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Best guess of the till time stamp (may be wrong).  <a href="#a3867ef683d994f3ab4a00b2ef7ae410c">More...</a><br/></td></tr>
<tr class="separator:a3867ef683d994f3ab4a00b2ef7ae410c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8db218626a224e54f964cf46054890cb"><td class="memItemLeft" align="right" valign="top">LCCollection *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1ConditionsDataWriteHandler.html#a8db218626a224e54f964cf46054890cb">_col</a></td></tr>
<tr class="memdesc:a8db218626a224e54f964cf46054890cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">pointer to the clone of the conditions data collection.  <a href="#a8db218626a224e54f964cf46054890cb">More...</a><br/></td></tr>
<tr class="separator:a8db218626a224e54f964cf46054890cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f95dd0e4ec24fbd1d4df217a679191d"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1ConditionsDataWriteHandler.html#a3f95dd0e4ec24fbd1d4df217a679191d">_changes</a></td></tr>
<tr class="memdesc:a3f95dd0e4ec24fbd1d4df217a679191d"><td class="mdescLeft">&#160;</td><td class="mdescRight">keep track of the number of changes.  <a href="#a3f95dd0e4ec24fbd1d4df217a679191d">More...</a><br/></td></tr>
<tr class="separator:a3f95dd0e4ec24fbd1d4df217a679191d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafdf1c7e91d569aed9cf422cd77d8fb6"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1ConditionsDataWriteHandler.html#aafdf1c7e91d569aed9cf422cd77d8fb6">_writes</a></td></tr>
<tr class="memdesc:aafdf1c7e91d569aed9cf422cd77d8fb6"><td class="mdescLeft">&#160;</td><td class="mdescRight">keep track of the number of conditions data written to the database.  <a href="#aafdf1c7e91d569aed9cf422cd77d8fb6">More...</a><br/></td></tr>
<tr class="separator:aafdf1c7e91d569aed9cf422cd77d8fb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8076fe1b19e269527fa769de5a88a65e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8076fe1b19e269527fa769de5a88a65e"></a>
long64&#160;</td><td class="memItemRight" valign="bottom"><b>_first</b></td></tr>
<tr class="separator:a8076fe1b19e269527fa769de5a88a65e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5debaace61a41f99d2df0ce318c036bf"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5debaace61a41f99d2df0ce318c036bf"></a>
long64&#160;</td><td class="memItemRight" valign="bottom"><b>_last</b></td></tr>
<tr class="separator:a5debaace61a41f99d2df0ce318c036bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Handler of conditions data changes which writes the replaced collections to a conditions data base. </p>
<p>When ever conditions data changes the old (cloned) collection will be stored with the time stamps of the event just before the former conditions data change and the time stamp of the last event. At the end of the run, the conditions data has to be written manually by calling <a class="el" href="classCALICE_1_1ConditionsDataWriteHandler.html#a139623a650f56c24a5d32658da9af09b">writeConditionsData()</a> with the time stamp of the last event. </p>

<p>Definition at line <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00040">40</a> of file <a class="el" href="ConditionsDataWriteHandler_8hh_source.html">ConditionsDataWriteHandler.hh</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ae0e0b43ca010d9a424f962480175b110"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CALICE::ConditionsDataWriteHandler::ConditionsDataWriteHandler </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>col_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>db_init_string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>folder_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>description</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">col_name</td><td>the name of the to be monitored collection (not needed). </td></tr>
    <tr><td class="paramname">db_init_string</td><td>specifier of the database host name, database name, user and password. </td></tr>
    <tr><td class="paramname">folder_name</td><td>name of the destination folder. </td></tr>
    <tr><td class="paramname">tag</td><td>to be applied at the end of the run to the folder. </td></tr>
    <tr><td class="paramname">description</td><td>the description added to every collection written toe the data base. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="ConditionsDataWriteHandler_8cc_source.html#l00015">15</a> of file <a class="el" href="ConditionsDataWriteHandler_8cc_source.html">ConditionsDataWriteHandler.cc</a>.</p>

<p>References <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00114">_changeHandler</a>, <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00111">_colName</a>, <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00119">_since</a>, and <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00120">_till</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a0289e54f162d87125bce02b71dc46b51"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CALICE::ConditionsDataWriteHandler::conditionsChanged </td>
          <td>(</td>
          <td class="paramtype">lcio::LCCollection *&#160;</td>
          <td class="paramname"><em>col</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Be notified if conditions data changes and redirect changes to responsible class. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">col</td><td>the collection containing the new conditions data </td></tr>
  </table>
  </dd>
</dl>
<p>if (_changeHandler) { </p>

<p>Definition at line <a class="el" href="ConditionsDataWriteHandler_8cc_source.html#l00059">59</a> of file <a class="el" href="ConditionsDataWriteHandler_8cc_source.html">ConditionsDataWriteHandler.cc</a>.</p>

<p>References <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00114">_changeHandler</a>, <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00124">_changes</a>, <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00121">_col</a>, <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00111">_colName</a>, <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00119">_since</a>, <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00120">_till</a>, <a class="el" href="cloneUtils_8cc_source.html#l00032">CALICE::cloneCollection()</a>, and <a class="el" href="ConditionsDataWriteHandler_8cc_source.html#l00112">writeConditionsData()</a>.</p>

</div>
</div>
<a class="anchor" id="aaac4f4263bbfb7a38cfbf0cb6c6ef99b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CALICE::ConditionsDataWriteHandler::setSinceTime </td>
          <td>(</td>
          <td class="paramtype">long64&#160;</td>
          <td class="paramname"><em>since_time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the correct since time for the current conditions data. </p>
<p>The since time will be initialised by the time of the last event. But this is just too early. So, the <a class="el" href="classmarlin_1_1ConditionsDataWriter.html">marlin::ConditionsDataWriter</a> has to set the time of the next event. </p>

<p>Definition at line <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00078">78</a> of file <a class="el" href="ConditionsDataWriteHandler_8hh_source.html">ConditionsDataWriteHandler.hh</a>.</p>

<p>References <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00119">_since</a>.</p>

</div>
</div>
<a class="anchor" id="a139623a650f56c24a5d32658da9af09b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CALICE::ConditionsDataWriteHandler::writeConditionsData </td>
          <td>(</td>
          <td class="paramtype">const long64 &amp;&#160;</td>
          <td class="paramname"><em>best_guess_of_till_time_stamp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>write the conditions data to the conditions database. </p>
<p>Must be called at the end of the run to </p>

<p>Definition at line <a class="el" href="ConditionsDataWriteHandler_8cc_source.html#l00112">112</a> of file <a class="el" href="ConditionsDataWriteHandler_8cc_source.html">ConditionsDataWriteHandler.cc</a>.</p>

<p>References <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00121">_col</a>, <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00111">_colName</a>, <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00119">_since</a>, and <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00126">_writes</a>.</p>

<p>Referenced by <a class="el" href="ConditionsDataWriteHandler_8cc_source.html#l00059">conditionsChanged()</a>.</p>

</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a class="anchor" id="a3f95dd0e4ec24fbd1d4df217a679191d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int CALICE::ConditionsDataWriteHandler::_changes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>keep track of the number of changes. </p>

<p>Definition at line <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00124">124</a> of file <a class="el" href="ConditionsDataWriteHandler_8hh_source.html">ConditionsDataWriteHandler.hh</a>.</p>

<p>Referenced by <a class="el" href="ConditionsDataWriteHandler_8cc_source.html#l00059">conditionsChanged()</a>.</p>

</div>
</div>
<a class="anchor" id="a8db218626a224e54f964cf46054890cb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">LCCollection* CALICE::ConditionsDataWriteHandler::_col</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>pointer to the clone of the conditions data collection. </p>

<p>Definition at line <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00121">121</a> of file <a class="el" href="ConditionsDataWriteHandler_8hh_source.html">ConditionsDataWriteHandler.hh</a>.</p>

<p>Referenced by <a class="el" href="ConditionsDataWriteHandler_8cc_source.html#l00059">conditionsChanged()</a>, <a class="el" href="ConditionsDataWriteHandler_8cc_source.html#l00112">writeConditionsData()</a>, and <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00059">~ConditionsDataWriteHandler()</a>.</p>

</div>
</div>
<a class="anchor" id="ae9c2172504130f906f18d6459823d62b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">long64 CALICE::ConditionsDataWriteHandler::_since</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>the time of the event just before the conditions data changed. </p>

<p>Definition at line <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00119">119</a> of file <a class="el" href="ConditionsDataWriteHandler_8hh_source.html">ConditionsDataWriteHandler.hh</a>.</p>

<p>Referenced by <a class="el" href="ConditionsDataWriteHandler_8cc_source.html#l00059">conditionsChanged()</a>, <a class="el" href="ConditionsDataWriteHandler_8cc_source.html#l00015">ConditionsDataWriteHandler()</a>, <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00100">currentValidSince()</a>, <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00078">setSinceTime()</a>, and <a class="el" href="ConditionsDataWriteHandler_8cc_source.html#l00112">writeConditionsData()</a>.</p>

</div>
</div>
<a class="anchor" id="a3867ef683d994f3ab4a00b2ef7ae410c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">long64 CALICE::ConditionsDataWriteHandler::_till</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Best guess of the till time stamp (may be wrong). </p>

<p>Definition at line <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00120">120</a> of file <a class="el" href="ConditionsDataWriteHandler_8hh_source.html">ConditionsDataWriteHandler.hh</a>.</p>

<p>Referenced by <a class="el" href="ConditionsDataWriteHandler_8cc_source.html#l00059">conditionsChanged()</a>, <a class="el" href="ConditionsDataWriteHandler_8cc_source.html#l00015">ConditionsDataWriteHandler()</a>, and <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00104">currentValidTill()</a>.</p>

</div>
</div>
<a class="anchor" id="aafdf1c7e91d569aed9cf422cd77d8fb6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int CALICE::ConditionsDataWriteHandler::_writes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>keep track of the number of conditions data written to the database. </p>

<p>Definition at line <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00126">126</a> of file <a class="el" href="ConditionsDataWriteHandler_8hh_source.html">ConditionsDataWriteHandler.hh</a>.</p>

<p>Referenced by <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00088">changes()</a>, <a class="el" href="ConditionsDataWriteHandler_8hh_source.html#l00084">numberOfWrites()</a>, and <a class="el" href="ConditionsDataWriteHandler_8cc_source.html#l00112">writeConditionsData()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="ConditionsDataWriteHandler_8hh_source.html">ConditionsDataWriteHandler.hh</a></li>
<li><a class="el" href="ConditionsDataWriteHandler_8cc_source.html">ConditionsDataWriteHandler.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
