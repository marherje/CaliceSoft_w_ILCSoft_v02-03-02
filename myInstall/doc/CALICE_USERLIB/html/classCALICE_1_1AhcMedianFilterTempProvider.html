<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>CALICE_USERLIB: CALICE::AhcMedianFilterTempProvider Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CALICE_USERLIB
   &#160;<span id="projectnumber">6.7.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceCALICE.html">CALICE</a></li><li class="navelem"><a class="el" href="classCALICE_1_1AhcMedianFilterTempProvider.html">AhcMedianFilterTempProvider</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">CALICE::AhcMedianFilterTempProvider Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This is a very simple temperature provider for the ahcal.  
 <a href="classCALICE_1_1AhcMedianFilterTempProvider.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="AhcMedianFilterTempProvider_8hh_source.html">AhcMedianFilterTempProvider.hh</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for CALICE::AhcMedianFilterTempProvider:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classCALICE_1_1AhcMedianFilterTempProvider.png" usemap="#CALICE::AhcMedianFilterTempProvider_map" alt=""/>
  <map id="CALICE::AhcMedianFilterTempProvider_map" name="CALICE::AhcMedianFilterTempProvider_map">
<area href="classCALICE_1_1AhcTempProvider.html" title="This is an abstract class defining an interface to access the temperatures in single AHCAL cells..." alt="CALICE::AhcTempProvider" shape="rect" coords="0,0,236,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:afc6895b4468f12307c2da9f64c3eb5ed"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afc6895b4468f12307c2da9f64c3eb5ed"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>AhcMedianFilterTempProvider</b> (<a class="el" href="classCALICE_1_1AhcMapper.html">AhcMapper</a> const *mapper)</td></tr>
<tr class="separator:afc6895b4468f12307c2da9f64c3eb5ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d5865711d94a975e593df2713608880"><td class="memItemLeft" align="right" valign="top">virtual float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1AhcMedianFilterTempProvider.html#a2d5865711d94a975e593df2713608880">getCellTemp</a> (int module, int chip, int chan)</td></tr>
<tr class="memdesc:a2d5865711d94a975e593df2713608880"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the temperature for the cell in the specified module connected to the given chip and channel.  <a href="#a2d5865711d94a975e593df2713608880">More...</a><br/></td></tr>
<tr class="separator:a2d5865711d94a975e593df2713608880"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace083f026078087a40383dd051d34843"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ace083f026078087a40383dd051d34843"></a>
virtual float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1AhcMedianFilterTempProvider.html#ace083f026078087a40383dd051d34843">getCellTempError</a> (int module, int chip, int chan)</td></tr>
<tr class="memdesc:ace083f026078087a40383dd051d34843"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the error on the temperature for the cell in the specified module connected to the given chip and channel. <br/></td></tr>
<tr class="separator:ace083f026078087a40383dd051d34843"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a237fba51962e5102c9580cfa9ed431fa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a237fba51962e5102c9580cfa9ed431fa"></a>
virtual float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1AhcMedianFilterTempProvider.html#a237fba51962e5102c9580cfa9ed431fa">getAvgTemp</a> ()</td></tr>
<tr class="memdesc:a237fba51962e5102c9580cfa9ed431fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the average calorimeter temperature. <br/></td></tr>
<tr class="separator:a237fba51962e5102c9580cfa9ed431fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5395b7d6095c39af7e0b80b133ba400d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5395b7d6095c39af7e0b80b133ba400d"></a>
virtual float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1AhcMedianFilterTempProvider.html#a5395b7d6095c39af7e0b80b133ba400d">getAvgModuleTemp</a> (unsigned module)</td></tr>
<tr class="memdesc:a5395b7d6095c39af7e0b80b133ba400d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the average module temperature. <br/></td></tr>
<tr class="separator:a5395b7d6095c39af7e0b80b133ba400d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9f730849a87bda3106773b7dc869f2e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac9f730849a87bda3106773b7dc869f2e"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1AhcMedianFilterTempProvider.html#ac9f730849a87bda3106773b7dc869f2e">getSensorTemp</a> (int module, int sensor)</td></tr>
<tr class="memdesc:ac9f730849a87bda3106773b7dc869f2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the temperature for the specified module and sensor. <br/></td></tr>
<tr class="separator:ac9f730849a87bda3106773b7dc869f2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classCALICE_1_1AhcTempProvider"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classCALICE_1_1AhcTempProvider')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classCALICE_1_1AhcTempProvider.html">CALICE::AhcTempProvider</a></td></tr>
<tr class="memitem:ab4f94c3219c7389ce3871daea4396b4a inherit pub_methods_classCALICE_1_1AhcTempProvider"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab4f94c3219c7389ce3871daea4396b4a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1AhcTempProvider.html#ab4f94c3219c7389ce3871daea4396b4a">AhcTempProvider</a> ()</td></tr>
<tr class="memdesc:ab4f94c3219c7389ce3871daea4396b4a inherit pub_methods_classCALICE_1_1AhcTempProvider"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor. <br/></td></tr>
<tr class="separator:ab4f94c3219c7389ce3871daea4396b4a inherit pub_methods_classCALICE_1_1AhcTempProvider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53d2786bdade2bbcbee773091e774947 inherit pub_methods_classCALICE_1_1AhcTempProvider"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a53d2786bdade2bbcbee773091e774947"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1AhcTempProvider.html#a53d2786bdade2bbcbee773091e774947">~AhcTempProvider</a> ()</td></tr>
<tr class="memdesc:a53d2786bdade2bbcbee773091e774947 inherit pub_methods_classCALICE_1_1AhcTempProvider"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default destructor. <br/></td></tr>
<tr class="separator:a53d2786bdade2bbcbee773091e774947 inherit pub_methods_classCALICE_1_1AhcTempProvider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a813430a9d33851e62c60b8d6e642fc13 inherit pub_methods_classCALICE_1_1AhcTempProvider"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a813430a9d33851e62c60b8d6e642fc13"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1AhcTempProvider.html#a813430a9d33851e62c60b8d6e642fc13">setAhcSroModBlocks</a> (lcio::LCCollection *col)</td></tr>
<tr class="memdesc:a813430a9d33851e62c60b8d6e642fc13 inherit pub_methods_classCALICE_1_1AhcTempProvider"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the collection of <a class="el" href="classCALICE_1_1AhcSlowReadoutModBlock.html" title="Interface Class to access the AhcSlowReadout Data Here we handle ahc voltages, temperatures et al...">AhcSlowReadoutModBlock</a> objects to extract the temperature data from. <br/></td></tr>
<tr class="separator:a813430a9d33851e62c60b8d6e642fc13 inherit pub_methods_classCALICE_1_1AhcTempProvider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f7ff35b597b659d1de162dbfd4a34c8 inherit pub_methods_classCALICE_1_1AhcTempProvider"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9f7ff35b597b659d1de162dbfd4a34c8"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1AhcTempProvider.html#a9f7ff35b597b659d1de162dbfd4a34c8">setCalibrations</a> (lcio::LCCollection *col)</td></tr>
<tr class="memdesc:a9f7ff35b597b659d1de162dbfd4a34c8 inherit pub_methods_classCALICE_1_1AhcTempProvider"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the collection of <a class="el" href="classCALICE_1_1SimpleValue.html" title="Class to store float value, its error, and status flag plus integer index in LCIO. ">SimpleValue</a> objects to use for the offset calibrations of the temperature sensors. <br/></td></tr>
<tr class="separator:a9f7ff35b597b659d1de162dbfd4a34c8 inherit pub_methods_classCALICE_1_1AhcTempProvider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add95eab55a99250ec9f0666fc34ba40d inherit pub_methods_classCALICE_1_1AhcTempProvider"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1AhcTempProvider.html#add95eab55a99250ec9f0666fc34ba40d">setSanityRange</a> (float min, float max)</td></tr>
<tr class="memdesc:add95eab55a99250ec9f0666fc34ba40d inherit pub_methods_classCALICE_1_1AhcTempProvider"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define a sanity range of temperature values that make sense.  <a href="#add95eab55a99250ec9f0666fc34ba40d">More...</a><br/></td></tr>
<tr class="separator:add95eab55a99250ec9f0666fc34ba40d inherit pub_methods_classCALICE_1_1AhcTempProvider"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a9ffdad9db5836b0ceb55f317095cfe8c"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1AhcMedianFilterTempProvider.html#a9ffdad9db5836b0ceb55f317095cfe8c">applyCorrection</a> ()</td></tr>
<tr class="memdesc:a9ffdad9db5836b0ceb55f317095cfe8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function applies the correction to the internal 'cache' for the temperature values from the five sensors.  <a href="#a9ffdad9db5836b0ceb55f317095cfe8c">More...</a><br/></td></tr>
<tr class="separator:a9ffdad9db5836b0ceb55f317095cfe8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a708c84d516d63059ba6665dae2da147e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a708c84d516d63059ba6665dae2da147e"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1AhcMedianFilterTempProvider.html#a708c84d516d63059ba6665dae2da147e">isBadValue</a> (float t)</td></tr>
<tr class="memdesc:a708c84d516d63059ba6665dae2da147e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if argument value is outside the sanity range. <br/></td></tr>
<tr class="separator:a708c84d516d63059ba6665dae2da147e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classCALICE_1_1AhcTempProvider"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classCALICE_1_1AhcTempProvider')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classCALICE_1_1AhcTempProvider.html">CALICE::AhcTempProvider</a></td></tr>
<tr class="memitem:aaf2e7780e46882ba4fe8755c8bad2237 inherit pro_methods_classCALICE_1_1AhcTempProvider"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1AhcTempProvider.html#aaf2e7780e46882ba4fe8755c8bad2237">updateCache</a> ()</td></tr>
<tr class="memdesc:aaf2e7780e46882ba4fe8755c8bad2237 inherit pro_methods_classCALICE_1_1AhcTempProvider"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function updates the internal 'cache' for the temperature values from the five sensors and applies the calibration offsets, if available.  <a href="#aaf2e7780e46882ba4fe8755c8bad2237">More...</a><br/></td></tr>
<tr class="separator:aaf2e7780e46882ba4fe8755c8bad2237 inherit pro_methods_classCALICE_1_1AhcTempProvider"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a23a23ba36d563be88a3f1a20a51b28c9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a23a23ba36d563be88a3f1a20a51b28c9"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1AhcMedianFilterTempProvider.html#a23a23ba36d563be88a3f1a20a51b28c9">getSensor</a> (int chip, int chan)</td></tr>
<tr class="memdesc:a23a23ba36d563be88a3f1a20a51b28c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the closest sensor to cell connected to chip, chan according to DESY-THESIS-2008-050. <br/></td></tr>
<tr class="separator:a23a23ba36d563be88a3f1a20a51b28c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acab9513cd7e4395371bde8d433177cdb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acab9513cd7e4395371bde8d433177cdb"></a>
double&#160;</td><td class="memItemRight" valign="bottom"><b>median</b> (float a[], int n)</td></tr>
<tr class="separator:acab9513cd7e4395371bde8d433177cdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aa401791e44b7cc8c0c9093b66d84ac6a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa401791e44b7cc8c0c9093b66d84ac6a"></a>
<a class="el" href="classCALICE_1_1AhcMapper.html">AhcMapper</a> const *&#160;</td><td class="memItemRight" valign="bottom"><b>_mapper</b></td></tr>
<tr class="separator:aa401791e44b7cc8c0c9093b66d84ac6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76bfbd1b9fd6deead5eeaf572f2498ef"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a76bfbd1b9fd6deead5eeaf572f2498ef"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>_caloMeanTemp</b></td></tr>
<tr class="separator:a76bfbd1b9fd6deead5eeaf572f2498ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73f567416a0bcb8b5f8a130df8cad1f3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a73f567416a0bcb8b5f8a130df8cad1f3"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><b>_caloMeanTempRMS</b></td></tr>
<tr class="separator:a73f567416a0bcb8b5f8a130df8cad1f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfa3e2672c774bc6814b5f44eda6ba9a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abfa3e2672c774bc6814b5f44eda6ba9a"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>_caloMeanCount</b></td></tr>
<tr class="separator:abfa3e2672c774bc6814b5f44eda6ba9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20f5463fcf3ba997a6b081615830940f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a20f5463fcf3ba997a6b081615830940f"></a>
std::vector&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>_moduleMeanTemp</b></td></tr>
<tr class="separator:a20f5463fcf3ba997a6b081615830940f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecb3f33637742eb7af6b9e0cbdb276a8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aecb3f33637742eb7af6b9e0cbdb276a8"></a>
std::vector&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>_moduleMeanTempRMS</b></td></tr>
<tr class="separator:aecb3f33637742eb7af6b9e0cbdb276a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17ece36832271a1590d721aabc0ce7ed"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a17ece36832271a1590d721aabc0ce7ed"></a>
std::vector&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>_moduleMeanCount</b></td></tr>
<tr class="separator:a17ece36832271a1590d721aabc0ce7ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_attribs_classCALICE_1_1AhcTempProvider"><td colspan="2" onclick="javascript:toggleInherit('pub_static_attribs_classCALICE_1_1AhcTempProvider')"><img src="closed.png" alt="-"/>&#160;Static Public Attributes inherited from <a class="el" href="classCALICE_1_1AhcTempProvider.html">CALICE::AhcTempProvider</a></td></tr>
<tr class="memitem:a2fb5517d9cf3179ccb581d37cc91097a inherit pub_static_attribs_classCALICE_1_1AhcTempProvider"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2fb5517d9cf3179ccb581d37cc91097a"></a>
static const unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>N_MODULES</b> = 38</td></tr>
<tr class="separator:a2fb5517d9cf3179ccb581d37cc91097a inherit pub_static_attribs_classCALICE_1_1AhcTempProvider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfe5f33f2eeae2901e32edca4515cd20 inherit pub_static_attribs_classCALICE_1_1AhcTempProvider"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adfe5f33f2eeae2901e32edca4515cd20"></a>
static const unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>N_SENSORS</b> = 5</td></tr>
<tr class="separator:adfe5f33f2eeae2901e32edca4515cd20 inherit pub_static_attribs_classCALICE_1_1AhcTempProvider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_attribs_classCALICE_1_1AhcTempProvider"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_classCALICE_1_1AhcTempProvider')"><img src="closed.png" alt="-"/>&#160;Protected Attributes inherited from <a class="el" href="classCALICE_1_1AhcTempProvider.html">CALICE::AhcTempProvider</a></td></tr>
<tr class="memitem:a74d1c14bbe08ef50cacf1b52c2731904 inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1AhcTempProvider.html#a74d1c14bbe08ef50cacf1b52c2731904">newSroModCol</a></td></tr>
<tr class="memdesc:a74d1c14bbe08ef50cacf1b52c2731904 inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="mdescLeft">&#160;</td><td class="mdescRight">If true this indicates that setSroModBlocks() was called and a new collection of AhcSroModBlock objects was set.  <a href="#a74d1c14bbe08ef50cacf1b52c2731904">More...</a><br/></td></tr>
<tr class="separator:a74d1c14bbe08ef50cacf1b52c2731904 inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d97a51401f30bf5afed91749503a2f5 inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1AhcTempProvider.html#a5d97a51401f30bf5afed91749503a2f5">newCalibCol</a></td></tr>
<tr class="memdesc:a5d97a51401f30bf5afed91749503a2f5 inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="mdescLeft">&#160;</td><td class="mdescRight">If true this indicates that <a class="el" href="classCALICE_1_1AhcTempProvider.html#a9f7ff35b597b659d1de162dbfd4a34c8" title="Set the collection of SimpleValue objects to use for the offset calibrations of the temperature senso...">setCalibrations()</a> was called and a new collection of calibrations was set.  <a href="#a5d97a51401f30bf5afed91749503a2f5">More...</a><br/></td></tr>
<tr class="separator:a5d97a51401f30bf5afed91749503a2f5 inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc923ba1a81304d4165060e6cb8bfe87 inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1AhcTempProvider.html#afc923ba1a81304d4165060e6cb8bfe87">newSanityRange</a></td></tr>
<tr class="memdesc:afc923ba1a81304d4165060e6cb8bfe87 inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="mdescLeft">&#160;</td><td class="mdescRight">If true this indicates that <a class="el" href="classCALICE_1_1AhcTempProvider.html#add95eab55a99250ec9f0666fc34ba40d" title="Define a sanity range of temperature values that make sense. ">setSanityRange()</a> was called and a new sanity range was set.  <a href="#afc923ba1a81304d4165060e6cb8bfe87">More...</a><br/></td></tr>
<tr class="separator:afc923ba1a81304d4165060e6cb8bfe87 inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e5a07c38f63a12bc38eebff556ac750 inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; float &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1AhcTempProvider.html#a4e5a07c38f63a12bc38eebff556ac750">sensorTemp</a></td></tr>
<tr class="memdesc:a4e5a07c38f63a12bc38eebff556ac750 inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a 'cache' for the values of the temperature sensors after calibration and and correction.  <a href="#a4e5a07c38f63a12bc38eebff556ac750">More...</a><br/></td></tr>
<tr class="separator:a4e5a07c38f63a12bc38eebff556ac750 inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf152646f43cf38d95af642369fc7b71 inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; float &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1AhcTempProvider.html#acf152646f43cf38d95af642369fc7b71">sensorTempError</a></td></tr>
<tr class="memdesc:acf152646f43cf38d95af642369fc7b71 inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a 'cache' for the errors on the values of the temperature sensors after calibration and and correction.  <a href="#acf152646f43cf38d95af642369fc7b71">More...</a><br/></td></tr>
<tr class="separator:acf152646f43cf38d95af642369fc7b71 inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4116a88a804429437ab8c940d555eba inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; float &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1AhcTempProvider.html#ad4116a88a804429437ab8c940d555eba">sensorCalib</a></td></tr>
<tr class="memdesc:ad4116a88a804429437ab8c940d555eba inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a 'cache' for the calibration offsets for the temperature sensors.  <a href="#ad4116a88a804429437ab8c940d555eba">More...</a><br/></td></tr>
<tr class="separator:ad4116a88a804429437ab8c940d555eba inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a8b275ae8bf46f0ac30504ce2b437b0 inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::vector&lt; float &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1AhcTempProvider.html#a9a8b275ae8bf46f0ac30504ce2b437b0">sensorCalibError</a></td></tr>
<tr class="memdesc:a9a8b275ae8bf46f0ac30504ce2b437b0 inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a 'cache' for the errors on the calibration offsets for the temperature sensors.  <a href="#a9a8b275ae8bf46f0ac30504ce2b437b0">More...</a><br/></td></tr>
<tr class="separator:a9a8b275ae8bf46f0ac30504ce2b437b0 inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af49e3cc723e4ce780660fe181fd2b40f inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af49e3cc723e4ce780660fe181fd2b40f"></a>
std::vector&lt; std::vector&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1AhcTempProvider.html#af49e3cc723e4ce780660fe181fd2b40f">sensorCalibStatus</a></td></tr>
<tr class="memdesc:af49e3cc723e4ce780660fe181fd2b40f inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="mdescLeft">&#160;</td><td class="mdescRight">Vector to save the status of the calibration offsets. <br/></td></tr>
<tr class="separator:af49e3cc723e4ce780660fe181fd2b40f inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdf8e26d39ac276e7eac53b2746348c2 inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acdf8e26d39ac276e7eac53b2746348c2"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1AhcTempProvider.html#acdf8e26d39ac276e7eac53b2746348c2">_sanityMin</a></td></tr>
<tr class="memdesc:acdf8e26d39ac276e7eac53b2746348c2 inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lower limit of the sanity range. <br/></td></tr>
<tr class="separator:acdf8e26d39ac276e7eac53b2746348c2 inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c8919447ae0eece8b050ea21bc80e15 inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5c8919447ae0eece8b050ea21bc80e15"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1AhcTempProvider.html#a5c8919447ae0eece8b050ea21bc80e15">_sanityMax</a></td></tr>
<tr class="memdesc:a5c8919447ae0eece8b050ea21bc80e15 inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="mdescLeft">&#160;</td><td class="mdescRight">Upper limit of the sanity range. <br/></td></tr>
<tr class="separator:a5c8919447ae0eece8b050ea21bc80e15 inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d03fdcfc0a4fedc590597f4383d36ae inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6d03fdcfc0a4fedc590597f4383d36ae"></a>
lcio::LCCollection *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1AhcTempProvider.html#a6d03fdcfc0a4fedc590597f4383d36ae">_sroModCol</a></td></tr>
<tr class="memdesc:a6d03fdcfc0a4fedc590597f4383d36ae inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="mdescLeft">&#160;</td><td class="mdescRight">A pointer to the LCCollection containing the AhcSlowReadOut objects. <br/></td></tr>
<tr class="separator:a6d03fdcfc0a4fedc590597f4383d36ae inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed886ffef7d22bdcfbfa4e00b6c27f9f inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aed886ffef7d22bdcfbfa4e00b6c27f9f"></a>
lcio::LCCollection *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCALICE_1_1AhcTempProvider.html#aed886ffef7d22bdcfbfa4e00b6c27f9f">_calibCol</a></td></tr>
<tr class="memdesc:aed886ffef7d22bdcfbfa4e00b6c27f9f inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="mdescLeft">&#160;</td><td class="mdescRight">A pointer to the LCCollection containing the calibration offsets objects. <br/></td></tr>
<tr class="separator:aed886ffef7d22bdcfbfa4e00b6c27f9f inherit pro_attribs_classCALICE_1_1AhcTempProvider"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This is a very simple temperature provider for the ahcal. </p>
<p>What it does:</p>
<ul>
<li>the calibration set is applied</li>
<li>if a temperature sensor gives a value outside the defined sanity range the value is replaced by the average of the four sensors in that module</li>
<li>for each cell the temperature value from the 'closest' sensor, according to the table 3.1, DESY-THESIS-2008-050 is returned</li>
</ul>
<p>Also see the documentation for the several functions for more detailed information. This new temperature provider with median filter created: Date: August 2013 Author: Sergey Morozov The temperature provider is based on the <a class="el" href="classCALICE_1_1AhcSimpleTempProvider.html" title="This is a very simple temperature provider for the ahcal. ">AhcSimpleTempProvider</a> with some updates:</p>
<ul>
<li>all temperature sensors are set to the layer average temperature.</li>
<li>the median filter to layer-by-layer profile has been introduced. This will help to remove the out-layers with wrong temperature measurements in some layers of AHCAL. Note: you need smooth (median filtered for example) MIP and gain temperature profiles in the MIP and gain calibrations to use this tempetarure provider for data reconstruction! </li>
</ul>

<p>Definition at line <a class="el" href="AhcMedianFilterTempProvider_8hh_source.html#l00038">38</a> of file <a class="el" href="AhcMedianFilterTempProvider_8hh_source.html">AhcMedianFilterTempProvider.hh</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a9ffdad9db5836b0ceb55f317095cfe8c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CALICE::AhcMedianFilterTempProvider::applyCorrection </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function applies the correction to the internal 'cache' for the temperature values from the five sensors. </p>
<p>It should be called everytime a new collection of temperatures or calibrations have been at set or the sanity range has been changed, i.e. if one of newSroModCol, newCalibCol or newSanityRange is true. This is done in <a class="el" href="classCALICE_1_1AhcMedianFilterTempProvider.html#a2d5865711d94a975e593df2713608880" title="Returns the temperature for the cell in the specified module connected to the given chip and channel...">getCellTemp()</a> and <a class="el" href="classCALICE_1_1AhcMedianFilterTempProvider.html#ace083f026078087a40383dd051d34843" title="Returns the error on the temperature for the cell in the specified module connected to the given chip...">getCellTempError()</a>. </p>

<p>Definition at line <a class="el" href="AhcMedianFilterTempProvider_8cc_source.html#l00097">97</a> of file <a class="el" href="AhcMedianFilterTempProvider_8cc_source.html">AhcMedianFilterTempProvider.cc</a>.</p>

<p>References <a class="el" href="AhcTempProvider_8hh_source.html#l00171">CALICE::AhcTempProvider::_sroModCol</a>, <a class="el" href="AhcMapper_8hh_source.html#l00531">CALICE::AhcMapper::getK()</a>, <a class="el" href="ScintCaloSlowReadoutModBlock_8hh_source.html#l00120">CALICE::ScintCaloSlowReadoutModBlock::getModuleNumber()</a>, <a class="el" href="AhcMedianFilterTempProvider_8cc_source.html#l00092">isBadValue()</a>, <a class="el" href="AhcTempProvider_8hh_source.html#l00116">CALICE::AhcTempProvider::newCalibCol</a>, <a class="el" href="AhcTempProvider_8hh_source.html#l00123">CALICE::AhcTempProvider::newSanityRange</a>, <a class="el" href="AhcTempProvider_8hh_source.html#l00109">CALICE::AhcTempProvider::newSroModCol</a>, <a class="el" href="AhcTempProvider_8hh_source.html#l00132">CALICE::AhcTempProvider::sensorTemp</a>, <a class="el" href="AhcTempProvider_8hh_source.html#l00142">CALICE::AhcTempProvider::sensorTempError</a>, and <a class="el" href="AhcTempProvider_8cc_source.html#l00059">CALICE::AhcTempProvider::updateCache()</a>.</p>

<p>Referenced by <a class="el" href="AhcMedianFilterTempProvider_8cc_source.html#l00039">getAvgModuleTemp()</a>, <a class="el" href="AhcMedianFilterTempProvider_8cc_source.html#l00049">getAvgTemp()</a>, <a class="el" href="AhcMedianFilterTempProvider_8cc_source.html#l00019">getCellTemp()</a>, <a class="el" href="AhcMedianFilterTempProvider_8cc_source.html#l00029">getCellTempError()</a>, and <a class="el" href="AhcMedianFilterTempProvider_8cc_source.html#l00059">getSensorTemp()</a>.</p>

</div>
</div>
<a class="anchor" id="a2d5865711d94a975e593df2713608880"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float CALICE::AhcMedianFilterTempProvider::getCellTemp </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>module</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>chip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>chan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the temperature for the cell in the specified module connected to the given chip and channel. </p>
<p>For each cell the temperature value from the 'closest' sensor, according to the table 3.1, DESY-THESIS-2008-050 is returned. </p>

<p>Implements <a class="el" href="classCALICE_1_1AhcTempProvider.html#aa12c75d45d7ade54316dd113a6bab2d1">CALICE::AhcTempProvider</a>.</p>

<p>Definition at line <a class="el" href="AhcMedianFilterTempProvider_8cc_source.html#l00019">19</a> of file <a class="el" href="AhcMedianFilterTempProvider_8cc_source.html">AhcMedianFilterTempProvider.cc</a>.</p>

<p>References <a class="el" href="AhcMedianFilterTempProvider_8cc_source.html#l00097">applyCorrection()</a>, <a class="el" href="AhcMedianFilterTempProvider_8cc_source.html#l00078">getSensor()</a>, <a class="el" href="AhcTempProvider_8hh_source.html#l00116">CALICE::AhcTempProvider::newCalibCol</a>, <a class="el" href="AhcTempProvider_8hh_source.html#l00123">CALICE::AhcTempProvider::newSanityRange</a>, <a class="el" href="AhcTempProvider_8hh_source.html#l00109">CALICE::AhcTempProvider::newSroModCol</a>, and <a class="el" href="AhcTempProvider_8hh_source.html#l00132">CALICE::AhcTempProvider::sensorTemp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="AhcMedianFilterTempProvider_8hh_source.html">AhcMedianFilterTempProvider.hh</a></li>
<li><a class="el" href="AhcMedianFilterTempProvider_8cc_source.html">AhcMedianFilterTempProvider.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
