\section{C\-A\-L\-I\-C\-E\-:\-:multi\-Calibrator Class Reference}
\label{classCALICE_1_1multiCalibrator}\index{C\-A\-L\-I\-C\-E\-::multi\-Calibrator@{C\-A\-L\-I\-C\-E\-::multi\-Calibrator}}


Processor to add P\-A\-R\-\_\-\-M\-U\-L\-T\-I to the event and calibrate the threshold.  




{\ttfamily \#include $<$multi\-Calibrator.\-hh$>$}

Inheritance diagram for C\-A\-L\-I\-C\-E\-:\-:multi\-Calibrator\-:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classCALICE_1_1multiCalibrator}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
Processor $\ast$ {\bfseries new\-Processor} ()\label{classCALICE_1_1multiCalibrator_ad18beb97b5deccfa062ed368644fce16}

\item 
virtual void {\bfseries init} ()\label{classCALICE_1_1multiCalibrator_a8a3e419d429f42b6ea7aae4b52428ce4}

\item 
virtual void {\bfseries process\-Run\-Header} (L\-C\-Run\-Header $\ast$run)\label{classCALICE_1_1multiCalibrator_a67d14b42a9ce88fc17515613efe997bc}

\item 
virtual void {\bfseries process\-Event} (L\-C\-Event $\ast$evt)\label{classCALICE_1_1multiCalibrator_a7664b108349a27d1497d52d55001dc41}

\item 
virtual void {\bfseries end} ()\label{classCALICE_1_1multiCalibrator_a156e6823b5819c32c0c1530f9cf17787}

\item 
virtual void {\bfseries conditions\-Changed} (lcio\-::\-L\-C\-Collection $\ast$col)\label{classCALICE_1_1multiCalibrator_aae74a036fde33453359d9938bacd8475}

\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
std\-::string {\bfseries \-\_\-adc\-Col\-Name}\label{classCALICE_1_1multiCalibrator_a2c6dadc7bd856f48ebabb2ff1f3eb24d}

\item 
std\-::string {\bfseries \-\_\-par\-Name\-Trigger\-Event}\label{classCALICE_1_1multiCalibrator_a9dcf1a278390cf22a27f873b03ecaf42}

\item 
std\-::string {\bfseries \-\_\-output\-File\-Path}\label{classCALICE_1_1multiCalibrator_a243d6d66340eba9a2cadfa2387b20c0f}

\item 
std\-::string {\bfseries \-\_\-connection\-Col\-Name}\label{classCALICE_1_1multiCalibrator_acd73797da60310a0a4bcfd495204a855}

\item 
std\-::string {\bfseries \-\_\-reference\-Threshold\-Col\-Name}\label{classCALICE_1_1multiCalibrator_ac3f8d6ece5b4b56d26a9864ee0618ce5}

\item 
std\-::string {\bfseries \-\_\-skip\-Calibration}\label{classCALICE_1_1multiCalibrator_af3bb02c62940673fb59d5250cc294d6d}

\item 
Float\-Vec {\bfseries \-\_\-signal\-Binning}\label{classCALICE_1_1multiCalibrator_aa88fe075d6603ee3c78158bd742b91e4}

\item 
Float\-Vec {\bfseries \-\_\-purity\-List}\label{classCALICE_1_1multiCalibrator_a8d8b4bb7da03c22ddf35a8f94c7bb1a0}

\item 
float {\bfseries \-\_\-gaus\-Range}\label{classCALICE_1_1multiCalibrator_a7fc0a223ac7ef8119b3b0a987eb44adc}

\item 
int {\bfseries \-\_\-rebin}\label{classCALICE_1_1multiCalibrator_a007fb7a565ad1ec0eb2719981203f8fe}

\item 
int {\bfseries \-\_\-gran\-Fac}\label{classCALICE_1_1multiCalibrator_a5dcaedfa4e29bad191bc22016eca0355}

\end{DoxyCompactItemize}
\subsection*{Private Types}
\begin{DoxyCompactItemize}
\item 
typedef std\-::map$<$ float, float $>$ {\bfseries Threshold\-Map\-\_\-t}\label{classCALICE_1_1multiCalibrator_a35b415a32f3bf4f78a4bb5adc3f96470}

\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
void {\bfseries fill\-Hist} (T\-H1\-F $\ast$hist, L\-C\-Event $\ast$evt)\label{classCALICE_1_1multiCalibrator_a0f54d7d5a1e9b4469bc59ae7b2d3a204}

\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
lccd\-::\-L\-C\-C\-D\-Time\-Stamp {\bfseries \-\_\-start\-Time}\label{classCALICE_1_1multiCalibrator_a33b407cfd46e3ac56bdc30947e0eb2e1}

\item 
lccd\-::\-L\-C\-C\-D\-Time\-Stamp {\bfseries \-\_\-end\-Time}\label{classCALICE_1_1multiCalibrator_a06d7b62ae49be9bad5c7eb8a7f270f58}

\item 
unsigned {\bfseries \-\_\-run\-Number}\label{classCALICE_1_1multiCalibrator_acfcabcaf4253473ac3d99df1f162da5f}

\item 
unsigned int {\bfseries \-\_\-crate}\label{classCALICE_1_1multiCalibrator_afc05f707dab2f811d755300d480d57f6}

\item 
unsigned int {\bfseries \-\_\-slot}\label{classCALICE_1_1multiCalibrator_a88106b2a17b0308851dfdace4d9fd8a4}

\item 
unsigned int {\bfseries \-\_\-fe}\label{classCALICE_1_1multiCalibrator_a7e31fc8c645ee72b61deafacb51ee6b5}

\item 
unsigned int {\bfseries \-\_\-chip}\label{classCALICE_1_1multiCalibrator_ae8423d1b22561196f45134990b6e3be5}

\item 
unsigned int {\bfseries \-\_\-channel}\label{classCALICE_1_1multiCalibrator_a1a14cc1103c22d000ea6565619bc98ee}

\item 
T\-H1\-F $\ast$ {\bfseries \-\_\-sig\-Hist}\label{classCALICE_1_1multiCalibrator_a5087ce6fdd939090347791bc86a02025}

\item 
T\-H1\-F $\ast$ {\bfseries \-\_\-ped\-Hist}\label{classCALICE_1_1multiCalibrator_abf5102e26fbe03d997813b06eea13818}

\item 
bool {\bfseries \-\_\-connection\-Available}\label{classCALICE_1_1multiCalibrator_adcb7ef44a6a00a92da355ee43dbcc147}

\item 
Threshold\-Map\-\_\-t {\bfseries \-\_\-reference\-Thresholds}\label{classCALICE_1_1multiCalibrator_ac2eccfcf6a4b10389fabf83c743a9b0d}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
Processor to add P\-A\-R\-\_\-\-M\-U\-L\-T\-I to the event and calibrate the threshold. 

This processor adds an event parameter containing the amplitude of the analog multiplicity counter readout. In addition a histogram of the amplitudes is collected and fitted to calibrate the multi threshold. The calibration procedure can be skipped by processor parameter. In this case, only the event parameter is added.

The mapping of the multiplicity counter connection is read from the L\-C\-I\-O stream.

The results of the calibration can be written directly to a L\-C\-C\-D database. To enable this feature, M\-U\-L\-T\-I\-\_\-\-D\-B\-I\-N\-I\-T has to contain a valid database connection string for write access at compile time. In this case, two processor parameters to set the output folders for thresholds and fraction of rejected events are available. If the string for a folder is empty, the writing of this folder will be skipped.

\begin{DoxyVersion}{Version}
1.\-0 
\end{DoxyVersion}
\begin{DoxyAuthor}{Author}
{\tt Benjamin.\-Lutz@desy.\-de} 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
Sep 2008 
\end{DoxyDate}


Definition at line 36 of file multi\-Calibrator.\-hh.



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
/nfs/dust/ilc/user/marquezh/\-Calice\-Soft\-\_\-w\-\_\-\-I\-L\-C\-Soft\-\_\-v02-\/03-\/02/calice\-\_\-calib/calibmulti/include/multi\-Calibrator.\-hh\item 
/nfs/dust/ilc/user/marquezh/\-Calice\-Soft\-\_\-w\-\_\-\-I\-L\-C\-Soft\-\_\-v02-\/03-\/02/calice\-\_\-calib/calibmulti/src/multi\-Calibrator.\-cc\end{DoxyCompactItemize}
