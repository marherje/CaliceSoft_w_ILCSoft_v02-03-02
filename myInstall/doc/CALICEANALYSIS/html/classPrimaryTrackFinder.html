<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>CALICEANALYSIS: PrimaryTrackFinder Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CALICEANALYSIS
   &#160;<span id="projectnumber">1.3.5</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classPrimaryTrackFinder-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">PrimaryTrackFinder Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Marlin processor that finds shower start and primary track.  
 <a href="classPrimaryTrackFinder.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="PrimaryTrackFinder_8hh_source.html">PrimaryTrackFinder.hh</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for PrimaryTrackFinder:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classPrimaryTrackFinder.png" usemap="#PrimaryTrackFinder_map" alt=""/>
  <map id="PrimaryTrackFinder_map" name="PrimaryTrackFinder_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad80886cf9c522adf66e28e7556d33027"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimaryTrackFinder.html#ad80886cf9c522adf66e28e7556d33027">PrimaryTrackFinder</a> ()</td></tr>
<tr class="separator:ad80886cf9c522adf66e28e7556d33027"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbf250d7baa1b884f2b07beda7e3e94f"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimaryTrackFinder.html#afbf250d7baa1b884f2b07beda7e3e94f">~PrimaryTrackFinder</a> ()</td></tr>
<tr class="separator:afbf250d7baa1b884f2b07beda7e3e94f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5138e4436f12055e84179818ec2ac9e8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5138e4436f12055e84179818ec2ac9e8"></a>
<a class="el" href="classPrimaryTrackFinder.html">PrimaryTrackFinder</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>newProcessor</b> ()</td></tr>
<tr class="separator:a5138e4436f12055e84179818ec2ac9e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad43a3f0087edc87883b15e41cd942ba7"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimaryTrackFinder.html#ad43a3f0087edc87883b15e41cd942ba7">init</a> ()</td></tr>
<tr class="separator:ad43a3f0087edc87883b15e41cd942ba7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae673540a7999deb4e6445b9c075930e0"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimaryTrackFinder.html#ae673540a7999deb4e6445b9c075930e0">processRunHeader</a> (LCRunHeader *)</td></tr>
<tr class="separator:ae673540a7999deb4e6445b9c075930e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f46f99fc7a7d58841c402abaf099276"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimaryTrackFinder.html#a6f46f99fc7a7d58841c402abaf099276">processEvent</a> (lcio::LCEvent *)</td></tr>
<tr class="separator:a6f46f99fc7a7d58841c402abaf099276"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd180f6ae6a0925be6cbdb06524c300c"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimaryTrackFinder.html#acd180f6ae6a0925be6cbdb06524c300c">end</a> ()</td></tr>
<tr class="separator:acd180f6ae6a0925be6cbdb06524c300c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac53641accf71821b0cf3361c835b1db9"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimaryTrackFinder.html#ac53641accf71821b0cf3361c835b1db9">distXY</a> (<a class="el" href="classCALICE_1_1CHit.html">CHit</a> *, <a class="el" href="classCALICE_1_1CHit.html">CHit</a> *)</td></tr>
<tr class="separator:ac53641accf71821b0cf3361c835b1db9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8929b71212ea8cda3fae0fbb4fe77ab"><td class="memItemLeft" align="right" valign="top">unsigned&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimaryTrackFinder.html#ac8929b71212ea8cda3fae0fbb4fe77ab">getStartingLayer</a> (<a class="el" href="classCALICE_1_1CLayer.html">CLayer</a> *)</td></tr>
<tr class="separator:ac8929b71212ea8cda3fae0fbb4fe77ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22924bae502da65b35257062f6230957"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimaryTrackFinder.html#a22924bae502da65b35257062f6230957">FindTrack</a> (unsigned, <a class="el" href="classCALICE_1_1CLayer.html">CLayer</a> *)</td></tr>
<tr class="separator:a22924bae502da65b35257062f6230957"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a143621618d51ea987b1ce48532893c36"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classPrimaryTrackFinder.html#a143621618d51ea987b1ce48532893c36">isMuon</a> (float, float)</td></tr>
<tr class="separator:a143621618d51ea987b1ce48532893c36"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Marlin processor that finds shower start and primary track. </p>
<p>In this processor CalorimeterHit collections for ECAL and HCAL are used to find shower starting layer and hits belonging to ingoing track, these hits are then put into output collection of class CalorimeterHit. In track output collection the following class members are set: Type - hit layer number, Position - XYZ hit coordinates, Energy - deposited energy in MIPs. For shower starting layer, LCGenericObject collection has two integer members: calorimeter type (0 - ECAL, 1 - first 30 HCAL layers, 2 - last coarse part of HCAL) shower starting layer number (in each calorimeter) and two float members: weighted average of x coordinate of track hits weighted average of y coordinate of track hits</p>
<dl class="section version"><dt>Version</dt><dd>4.01 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>M.V. Chadeeva </dd></dl>
<dl class="section date"><dt>Date</dt><dd>November 2010 </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ad80886cf9c522adf66e28e7556d33027"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PrimaryTrackFinder::PrimaryTrackFinder </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Default constructor </p>

</div>
</div>
<a class="anchor" id="afbf250d7baa1b884f2b07beda7e3e94f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">PrimaryTrackFinder::~PrimaryTrackFinder </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Default destructor </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ac53641accf71821b0cf3361c835b1db9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float PrimaryTrackFinder::distXY </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCALICE_1_1CHit.html">CHit</a> *&#160;</td>
          <td class="paramname"><em>h1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCALICE_1_1CHit.html">CHit</a> *&#160;</td>
          <td class="paramname"><em>h2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calculates and returns distance between two hits in XY-plane </p>

<p>References <a class="el" href="classCALICE_1_1CHit.html#a2d75c2ec6af4d1974d54dc7c95bb3769">CALICE::CHit::x</a>, and <a class="el" href="classCALICE_1_1CHit.html#a9ae960cc5bb59e64f41814c05501067f">CALICE::CHit::y</a>.</p>

<p>Referenced by <a class="el" href="classPrimaryTrackFinder.html#a22924bae502da65b35257062f6230957">FindTrack()</a>.</p>

</div>
</div>
<a class="anchor" id="acd180f6ae6a0925be6cbdb06524c300c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PrimaryTrackFinder::end </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Function to close root-file and print some statistic results </p>

</div>
</div>
<a class="anchor" id="a22924bae502da65b35257062f6230957"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PrimaryTrackFinder::FindTrack </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classCALICE_1_1CLayer.html">CLayer</a> *&#160;</td>
          <td class="paramname"><em>lr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Finds hits belonging to primary track taking in account the earlier found shower starting layer. The "nearest neighbour" criteria is used. Maximum distance parameters are defined taking in account the cell size. First parameter is the number of shower starting layer. Second parameter is an array with of objects <a class="el" href="classCLayer.html">CLayer</a> that contain layer parameters. </p>

<p>References <a class="el" href="classPrimaryTrackFinder.html#ac53641accf71821b0cf3361c835b1db9">distXY()</a>, <a class="el" href="classCALICE_1_1CHit.html#ac1bc0f62968053da2b6e42de30757397">CALICE::CHit::r</a>, <a class="el" href="classCALICE_1_1CHit.html#a2d75c2ec6af4d1974d54dc7c95bb3769">CALICE::CHit::x</a>, <a class="el" href="classCALICE_1_1CHit.html#a9ae960cc5bb59e64f41814c05501067f">CALICE::CHit::y</a>, and <a class="el" href="classCALICE_1_1CHit.html#ab1d439b8468fc38824edd2242475458e">CALICE::CHit::z</a>.</p>

<p>Referenced by <a class="el" href="classPrimaryTrackFinder.html#a6f46f99fc7a7d58841c402abaf099276">processEvent()</a>.</p>

</div>
</div>
<a class="anchor" id="ac8929b71212ea8cda3fae0fbb4fe77ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned PrimaryTrackFinder::getStartingLayer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classCALICE_1_1CLayer.html">CLayer</a> *&#160;</td>
          <td class="paramname"><em>lr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Finds and returns the number of layer where shower started using the following criteria:</p>
<ol type="1">
<li>Moving average sum of MIPs inside the window = 10 layers for two successive layers is greater than _avMIPxxxx value.</li>
<li>Number of hits in two successive layers is greater than _hitLimxxx value. Both constraints are set in steering file. They are energy dependent and similar for ECAL and HCAL. </li>
</ol>

<p>Referenced by <a class="el" href="classPrimaryTrackFinder.html#a6f46f99fc7a7d58841c402abaf099276">processEvent()</a>.</p>

</div>
</div>
<a class="anchor" id="ad43a3f0087edc87883b15e41cd942ba7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PrimaryTrackFinder::init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initialization of class members,root-file opening and histogramm booking </p>

</div>
</div>
<a class="anchor" id="a143621618d51ea987b1ce48532893c36"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool PrimaryTrackFinder::isMuon </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>e_eh</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>e_t</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Indentifies event as muon-like according to criterium proposed by Vasiliy Morgunov and based on low amount of total deposited energy: E1&lt;first parameter&lt;E2 &amp;&amp; E3&lt;second parameter&lt;E4 first parameter = Esum(ECAL)+Esum(HCAL) second parameter = Esum(TCMT) values E1, E2, E3 and E4 are taken from run data </p>

<p>Referenced by <a class="el" href="classPrimaryTrackFinder.html#a6f46f99fc7a7d58841c402abaf099276">processEvent()</a>.</p>

</div>
</div>
<a class="anchor" id="a6f46f99fc7a7d58841c402abaf099276"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PrimaryTrackFinder::processEvent </td>
          <td>(</td>
          <td class="paramtype">lcio::LCEvent *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Base function to loop over events from which all other functions are called for every event </p>

<p>References <a class="el" href="classCALICE_1_1CHit.html#a501007bdab32d174e272c37f2093fb7d">CALICE::CHit::c</a>, <a class="el" href="classCALICE_1_1CHit.html#a350b70c6610b2a393237a14ee2f51310">CALICE::CHit::e</a>, <a class="el" href="classCALICE_1_1CLayer.html#a5895428daee78075e1db8ebaf99f0b40">CALICE::CLayer::emip</a>, <a class="el" href="classPrimaryTrackFinder.html#a22924bae502da65b35257062f6230957">FindTrack()</a>, <a class="el" href="classPrimaryTrackFinder.html#ac8929b71212ea8cda3fae0fbb4fe77ab">getStartingLayer()</a>, <a class="el" href="classPrimaryTrackFinder.html#a143621618d51ea987b1ce48532893c36">isMuon()</a>, <a class="el" href="classCALICE_1_1CHit.html#ac1bc0f62968053da2b6e42de30757397">CALICE::CHit::r</a>, <a class="el" href="classCALICE_1_1CHit.html#a2d75c2ec6af4d1974d54dc7c95bb3769">CALICE::CHit::x</a>, <a class="el" href="classCALICE_1_1CHit.html#a9ae960cc5bb59e64f41814c05501067f">CALICE::CHit::y</a>, and <a class="el" href="classCALICE_1_1CHit.html#ab1d439b8468fc38824edd2242475458e">CALICE::CHit::z</a>.</p>

</div>
</div>
<a class="anchor" id="ae673540a7999deb4e6445b9c075930e0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void PrimaryTrackFinder::processRunHeader </td>
          <td>(</td>
          <td class="paramtype">LCRunHeader *&#160;</td>
          <td class="paramname"><em>run</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Processing of run header </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/nfs/dust/ilc/user/marquezh/CaliceSoft_w_ILCSoft_v02-03-02/calice_analysis/addonProcs/include/<a class="el" href="PrimaryTrackFinder_8hh_source.html">PrimaryTrackFinder.hh</a></li>
<li>/nfs/dust/ilc/user/marquezh/CaliceSoft_w_ILCSoft_v02-03-02/calice_analysis/addonProcs/src/PrimaryTrackFinder.cc</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
